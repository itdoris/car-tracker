---
layout: default
---

# Car Tracker - Руководство пользователя


## 1. НАЗНАЧЕНИЕ СИСТЕМЫ
Car Tracker — программа для определения интенсивности автомобильного потока. Пользователь, благодаря возможностям программы, может определить какое количество транспортных средств проехало на интересующем участке по заранее записанному видео. 


## 2. ОПИСАНИЕ СИСТЕМЫ
Программа состоит из следующих основных функциональных блоков:
1.	Графический пользовательский интерфейс для управления системой
2.	Видеопроцессор для просмотра видеофайлов
3.	Детектор транспортных средств
4.	Трекер передвижения транспортных средств
5.	Счетчик пройденных автомобилей
6.	Модуль генерации отчетов результатов анализа видеофайлов


## 3. РЕКОМЕНДАЦИИ ПО ИСПОЛЬЗОВАНИЮ
Функционал пользователя
Программа позволяет пользователю решать следующие задачи:
1.	Выбор видеофайла для анализа. Поддерживаются как популярные форматы видеофайлов avi, mkv, mp4, так и специализированные, в том числе формат Дорожного лабораторного комплекса системы видео паспортизации дорог – dav.
2.	Просмотр видеофайла в процессе обработки с необходимой скоростью.
3.	Анализ интенсивности автомобильного потока по заранее настроенной модели трекинга транспортных средств с использование обученной нейронной сети детектирования транспортных объектов.  
4.	Детальная настройка параметров анализа для уточнения результатов подсчета автомобильного потока при нестандартных условиях наблюдения (сложные погодные условия, специфичные параметры входного видеофайла, запись в сумерках и пр.)
5.	Формирование отчета по результатам анализа видеопотока с приложением фотоснимков подсчитанных транспортных средств для дальнейшей оценки.

### 3.1. Выбор видеофайла для анализа
Для анализа интенсивности транспортного потока необходимо заранее подготовить видеозапись на интересующем участке дороги. Рекомендуется выполнять видеозапись с обочины дороги, направив камеру по направлению движения транспортного потока таким образом, чтобы в кадре можно было наблюдать участок движения автомобиля протяженностью 10 – 100 м. Также рекомендуется устанавливать камеру таким образом, чтобы в кадре было видно все полосы движения транспорта, а также следует контролировать, чтобы в кадре не присутствовали препятствия и дорожные сооружения, которые частично могут закрывать собой движущиеся автомобили (барьерное ограждение, опоры освещения и пр.). Рекомендуется выполнять запись в светлое время суток при благоприятных погодных условиях – ясная и сухая погода без осадков. В качестве параметров видеофайла рекомендуется использовать следующие настройки: ширина кадра не менее 1280х720 пикселей, частота кадров не менее 5 кадров в секунду.

### 3.2. Просмотр видеофайла
При выполнении анализа видеофайла программа по умолчанию отображает входящий видеопоток в графическом окне. При этом в процессе анализа в момент детектирования транспортных средств такие объекты выделяются, а общее количество подсчитанных объектов выводится на экран. При необходимости графическое окно можно отключить, это позволит уменьшить потребление ресурсов системы и незначительно сократить время обработки видеофайла. 

### 3.3. Анализ интенсивности автомобильного потока
В процессе обработки видеофайла программа непрерывно подсчитывает интенсивность транспортного потока. При этом через заданный промежуток кадров (по умолчанию - 25), программа сохраняет и выводит на экран логирования количество пройденных транспортных средств. В настоящую редакцию программы включена предобученная модель, которая на основе нейросети способна определять такие виды транспортных средств как легковые и грузовые автомобили, автобусы и мототехника, при необходимости пользователь может отключить определения отдельных видов транспорта в разделе настроек.

### 3.4. Детальная настройка параметров анализа
Модель детектирования и подсчета транспортных средств по умолчанию настроена и готова к работе. Таким образом пользователю достаточно выбрать интересующий файл и запустить анализ. Дальнейший процесс пройдет в автоматическом режиме и по его окончанию пользователю будет предоставлены результаты количества пройденных автомобилей и отчет с результатами анализа. При необходимости пользователь может отдельно настроить интересующие параметры детектора и трекера автомобилей и таким образом изменить количество определяемых автомобилей в зависимостей от текущей дорожной ситуации, погодных условий, качества видеозаписи. Подробнее о процессе детальной настройки можно ознакомиться в соответствующем разделе.

### 3.5. Формирование отчета
Пользователю доступно два вида отчетов по результатам анализа видеофайла. Краткий отчет содержит сведения о количестве обработанных кадров и обнаруженных автомобилей. Данный отчет сохраняется в лог файл в папке с программой и выводится в окно логирования в процессе выполнения и по завершению анализа. В зависимости от желания пользователя программа может формировать детальный отчет с перечнем снимков всех пройденных автомобилей (по умолчанию настройка активна). При этом при каждом обнаружении автомобиля его снимок сохраняется в каталог с программой, а по завершению анализа формируется итоговый отчет в формате pdf. Из-за затрат ресурсов на сохранение снимка и формирование отчета процесс выполнения анализа может происходить несколько медленнее. При желании пользователь может отключить формирование детального отчета в настройках.


## 4. ДЕТАЛЬНАЯ НАСТРОЙКА СИСТЕМЫ
Краткое описание процесса анализа
До запуска анализа видеофайла можно настроить отдельные параметры обработки кадра, детектирования и трекинга транспорта.

В общем виде с точки зрения алгоритма программы процесс обработки выполняется «покадрово» и выглядит следующим образом.
1.	Загрузка кадра из видеофайла.
2.	Детектирование транспортных средств и выделение их на кадре.
3.	Трекинг объекта если объект был обнаружен ранее в предыдущих кадрах, выделение такого объекта.  
4.	Подсчет транспортных средств и логирование результатов анализа.
5.	Вывод кадра в графическое окно пользователя.
Далее описаны какие параметры можно настроить для каждой из стадий обработки, какие значения доступны для применения и даны общие рекомендации по назначению таких параметром. 

### 4.1. Загрузка кадра
- Запускать детектор – да / нет
  - Детектор – определяет транспорт в кадре, без него невозможен дальнейший анализ. Однако если необходимо, только посмотреть видеофайл без обработки, то детектор можно выключить.
- Запускать трекер – да / нет
  - Трекер – определяет связи объектов на различных кадрах, без него невозможен дальнейший подсчет транспорта. Однако если необходимо к примеру настроить детектор, то трекер можно временно выключить, чтобы сконцентрировать внимание на процессе настройки.
- Выводить каждый … кадр – 1 (целое число >= 1)
- Обрабатывать каждый … кадр – 1 (целое число >= 1)
  - Можно настроить процесс вывода кадров в графическое окно. Для ускорения процесса обработки можно частично пропускать кадры, если видеозапись содержит избыточное количество таких кадров. Достаточным для корректного подсчета транспорта будет 5 – 10 кадров на одну секунду реального времени. Таким образом если видеозапись имеет скорость 30 кадров в секунду, можно выводить и обрабатывать каждый 3 кадр – и тогда скорость обработки составит 10 кадров в секунду. 
- Задержка между кадрами, мсек – 1 (целое число >= 1)
  - Программа по умолчанию стремиться выполнить анализ за минимальное время, поэтому после того как кадр обработан, запускается обработка следующего кадра и в связи с этим видеозапись может отображаться быстрее, чем в реальности. Если необходимо отображать видео с реальной скоростью установить значение задержки больше 1. Для видео с частотой кадров 25 к/сек значение можно установить равным 40.
- Частичная обработка – да / нет
  - Начальный кадр – 1 (целое число >= 1)
  - Финальный кадр – 1000 (целое число >= 1)
  - Пользователь может задать программе обработать только часть видеофайла. Формат dav на данный момент поддерживает только установку финального кадра, а начальный кадр всегда соответствует 1.

### 4.2. Детектирование объектов
- Обнаруживать классы – [автомобили, автобусы, мототранспорт]
  - Пользователь по желанию может, к примеру, отключить обнаружение мототранспортных средств. По умолчанию все включены.
- Объединять похожие – да / нет
  - Дистанция объединения, пикс – 150 (целое число >= 1)
  - Детектор может ложно срабатывать, если автомобиль можно одновременно классифицировать в несколько классов. Чтобы исключить возможное задваивание можно объединять объекты, которые детектор обнаружил слишком близко друг к другу.
- Игнорировать вертикальные снимки – да / нет
  - Детектор может отбрасывать снимок, если авто находится к «неудачном» ракурсе или движется слишком далеко или близко к камере.
- Объединять похожие – да / нет
- Дистанция объединения, пикс – 150 (целое число >= 1)
  - Детектор может ложно срабатывать, если автомобиль можно одновременно классифицировать в несколько классов. Чтобы исключить возможное задваивание можно объединять объекты, которые детектор обнаружил слишком близко друг к другу.
- Проверять площадь снимка – да / нет
  - Минимальная площадь, % – 0.15 (0 < дробное число  < 1)
  - Максимальная площадь, % – 50.0 (0 < дробное число  < 1)
  - Детектор может отбрасывать снимок, если авто движется слишком далеко или очень близко к камере.
- Минимальная уверенность, % – 10 (0 < целое число < 100)
  - С какой достоверностью детектор выбирает объекты для дальнейшей обработки.

### 4.3. Трекинг транспорта
- Количество кадров для добавления – 2 (целое число >= 1)
  - Можно указать трекеру не сразу добавлять объект для набледения, а только если этот объект появлялся на видео более чем заданное количество кадров.
- Количество кадров для удаления – 3 (целое число >= 1)
  - Можно указать трекеру не сразу забывать объект после потери его из виду, а только если этот объект не появлялся на видео более чем заданное количество кадров. В этом случае программа пытается предсказать дальнейшее движение автомобиля и если, к примеру, наблюдаемый авто был какое-то время закрыт другим транспортом, а после вновь оказался в кадре, то программа вспомнит его и не будет считать учитывать его в статистике несколько раз.
- Дистанция между снимками, пикс – 500 (целое число >= 1)
  - Максимальная дистанция между снимками одного и того же объекта на соседних кадрах.

### 4.4. Подсчет транспортных средств
- Промежуточный отчет каждый … кадр – 25 (целое число >= 1)
  - Выводит скорость обработки, количество обработанных кадров и пройденных автомобилей в лог и на экран.
- Подсчет при пересечении характерной линии – да / нет
  - Учитывать в итоговой статистике не все авто, а только те которые пересекли характерную линию – вертикальный отрезок по середине кадра.
- Создать подробный отчет с перечнем авто – да / нет
  - Сохраняет снимки всех найденный авто с указанием количества.

### 4.5. Вывод кадра
- Показывать графическое окно – да / нет
  - Отображать кадры с результатами анализа во время обработки.
- Графическое окно поверх всех окон – да / нет
- Ширина графического окна, пикс – 1280 (целое число >= 1)
- Высота графического окна, пикс – 720 (целое число >= 1)


## 5. ДОПОЛНИТЕЛЬНЫЕ СВЕДЕНИЯ

### Сообщения об ошибках
Программа развивается и улучшается. Если вы нашли ошибки в программе или если вы хотите внести свои предложения по усовершенствованию системы, пишите на электронную почту.

### Условия использования
Car Tracker ("ПРОГРАММНЫЙ ПРОДУКТ") распространяется на условиях "как есть" ("as is"). Вы можете использовать ПРОГРАММНЫЙ ПРОДУКТ без ограничений при условии информирования разработчиков об обнаруженных ошибках.
Программа, графика, справочная система и другие части ПРОГРАММНОГО ПРОДУКТА являются собственностью ООО «НПО «Дорис Проект». ПРОГРАММНЫЙ ПРОДУКТ защищен законами об авторском праве и международными договорами.
Разработчики непрерывно трудятся над улучшением ПРОГРАММНОГО ПРОДУКТА, стараясь сделать его более стабильным, удобным и производительным.
Разработчики не несут никакой ответственности за повреждения аппаратного или программного обеспечения вызванные использованием ПРОГРАММНОГО ПРОДУКТА.
Использование ПРОГРАММНОГО ПРОДУКТА или других частей дистрибутива для коммерческих целей без согласия разработчиков запрещено.
ПРОГРАММНЫЙ ПРОДУКТ не передает никакой персональной информации идентифицирующей пользователя.

### Контакты
Для получения дополнительной информации о программе и предложениях о сотрудничестве обращайтесь в компанию ООО «НПО «Дорис Проект». 

Все пользователи программы обеспечиваются технической поддержкой. Мы ответим на все ваши вопросы, выслушаем ваши пожелания и постараемся исправить все найденные ошибки.

```
Car Tracker
Copyright (c) 2022 ООО «НПО «Дорис Проект»
```

Вернуться на [главную страницу](./index.html)

Вернуться на [главную страницу](./index.html)
